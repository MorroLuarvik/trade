# 2019.10.18
## Результаты тестирования эволюционного алгоритма
Т.к. с [2019.10.01](2019.10.01.md) идёт уверенный спад, но боты не дошли до упоров, большую часть свободного времени я посвятил эволюционному алгоритму, который собираюсь использовать для поиска оптимальных коэффициентов торговых ботов.

Мне требуется повышенная прибыльность и повышенная устойчивость.  
Результаты повторного применения полученных параметров несколько неоднозначны. Проще говоря стрёмные.

Запись из дневника:  
> В общем по симуляции торгов:
> - делаем мутацию параметров для многоразового прохода одного и того-же диапазона
> - с 2019.04.01 по 2019.07.01 симуляция ботов завершилась ошибкой. Необходимо купировать этот механизм и обеспечить выполнение эволюционного процесса на этом этапе
> - Сейчас идёт вялая движуха после слабого падения. Нужно выбрать аналогичный период в истории торгов и выбрать там наиболее доходные характеристики для ботов. 2018.08.01 - 2018.11.01
> - затем победителей с 2019.04.01 по 2019.07.01 запускае в диапазон 2018.08.01 - 2018.11.01, смотрим какие результаты они дадут
> - за одно проверим поведение бота с классическими параметрами на этих диапазонах

Предполагалось использовать следующий алгоритм тестирования:

> берём стрёмный этап, разбиваем его на три периода: первая отметка - запуск, вторая тормозим, третья - безоговорочный стоп.  
> Выбираем лучшего и среднего и запускаем его после стопа *или после безоговорочного* смотрим на результаты.  
> Затем эти-же действия проводим для последних данных с биржы, сперва для ботов со стрёмных этапов. Затем опять запускаем эволюцию на этом последнем этапе. Если всё норм - можно запускать боевых ботов.

В общем, как я организовал генерацию параметров:
запустил набор ботов на 10 дней, плюс 10 дней давал им для отработки. За 5 - 14 поколений получались боты с впечатляющими результатами.  
Например бот с профитом в 3.77% на падающем рынке.

Затем я начал испытвать полученные параметры на других временных диапазонах. В итоге, всего 1 раз из 4-5 показались хоть какие-то результаты.

На текущий момент я сделал следующие выводы: диапазон в 10 дней слишком мал. Бот выращивает коэффициенты именно для этого диапазона, мы же его затем переносим на + 10 дней. Естественно больших высот он ам не показывает.

Испытания буду производить исходя из следующих соображений
 - эволюцию буду запускать на диапазонах в 21, 27 или 30 дней. Надеюсь это даст некое "усреднение" параметров.
 - для закрытия даётся только один день. Не стоит ждать, когда изменится рынок. Чем дальше отстоит временной интервал от бота, тем более неадекватны будут его коэффициенты.
 - период жизни реального бота с полученными коэффициентами одна треть от эволюционного периода. Дальше рынок может поменяться да и результаты новых испытаний смогут подоспеть. После первой трети - отключаем автоповтор. Оставшиеся две трети даём на закрытие сделки.

Думаю, всё-таки стоит сделать выборку параметров согласно весовой функции. Сюда стоит добавить количество сделок. Чем больше сделок - тем лучше. Чтобы бот не подгонял параметры под одну удачную сделку за весь период.  
Рабочий период может оказаться другим.